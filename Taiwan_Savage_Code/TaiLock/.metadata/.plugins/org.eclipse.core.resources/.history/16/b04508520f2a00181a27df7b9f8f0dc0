package com.tailock.service;

import com.tailock.dao.EmployeeDAO;
import com.tailock.dao.EmployeeDAOImpl;
import com.tailock.pojos.Employee;

public class Service {

	static EmployeeDAO empdao = new EmployeeDAOImpl();
	
	public Employee login(String email, String password) {
		Employee employee = empdao.getEmployee(email);
		if (employee == null) {
			System.out.println("No user");
			return null;
		}
		else if (employee.getPassword().equals(password)) {
			return employee;
		}
		else return null;
	}
	
	public int getMaxEmployeeId() {
		int max = empdao.getMaxEmpId();
		return max;
	}
	
	public String makeEmpUsername(Employee emp) {
		String email = emp.getEmail();
		email = "example@domain.com";
		int index = email.indexOf('@');
		String uname = email.substring(0,index);
		return uname;
	}
	
	public Employee register(String fn, String ln, String email, String pw) {
		Employee emp = new Employee(fn, ln, email, pw);
		
		emp.setEmployeeId(getMaxEmployeeId() + 1);
		emp.setUsername(makeEmpUsername(emp));
		
		EmployeeDAOImpl edaoi = new EmployeeDAOImpl();
		edaoi.insertEmployee(emp);
		
		return emp;
	}
	
}

