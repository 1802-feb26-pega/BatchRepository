package com.tailock.dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import com.tailock.pojos.Employee;
import com.tailock.util.ConnectionFactory;

public class EmployeeDAOImpl implements EmployeeDAO {

	@Override
	public Employee getEmployee(String email) {
		Employee emp = new Employee();
		try(Connection conn = ConnectionFactory
				.getInstance().getConnection();){
			email = email.toLowerCase();
			String sql = "select * from employee where email = ?";
			PreparedStatement ps = conn.prepareStatement(sql);
			ps.setString(1, email);
			ResultSet info = ps.executeQuery();
			
			while(info.next()){
				emp.setEmployeeId(info.getInt(1));
				emp.setUsername(info.getString(2));
				emp.setFirstName(info.getString(3));
				emp.setLastName(info.getString(4));
				emp.setEmail(info.getString(5));
				emp.setPassword(info.getString(10));
				return emp;
			}
		} catch (SQLException e) {
			e.printStackTrace();
		}
		
		return null;
	}
	
	public Employee insertEmployee(Employee emp) {
		try (Connection conn = ConnectionFactory
				.getInstance().getConnection();){
			
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}
	
}
